/*
jCanvas v2.2
Caleb Evans
*/
(function(g,i,b,h,d){var c={};c.originals={width:20,height:20,cornerRadius:0,fillStyle:"transparent",strokeStyle:"transparent",strokeWidth:5,strokeCap:"butt",strokeJoin:"miter",shadowX:0,shadowY:0,shadowBlur:10,shadowColor:"transparent",x:0,y:0,x1:0,y1:0,radius:10,start:0,end:360,ccw:false,inDegrees:true,fromCenter:true,closed:false,sides:3,angle:0,text:"",font:"normal 12pt sans-serif",align:"center",baseline:"middle",source:"",repeat:"repeat"};c.defaults=g.extend({},c.originals);function a(j,k){j.fillStyle=k.fillStyle;j.strokeStyle=k.strokeStyle;j.lineWidth=k.strokeWidth;j.lineCap=k.strokeCap;j.lineJoin=k.strokeJoin;j.shadowOffsetX=k.shadowX;j.shadowOffsetY=k.shadowY;j.shadowBlur=k.shadowBlur;j.shadowColor=k.shadowColor}function f(j,k){if(k.closed===true){j.closePath();j.fill();j.stroke()}else{j.fill();j.stroke();j.closePath()}}function e(j){if(j.inDegrees===true){return b.PI/180}else{return 1}}g.fn.canvas=function(j){if(j===d){c.defaults=c.originals}else{c.defaults=g.extend({},c.defaults,j)}return this};g.fn.loadCanvas=function(j){if(j===d){j="2d"}return this[0].getContext(j)};g.fn.gradient=function(k){var j=this.loadCanvas(),m={x1:0,y1:0,x2:0,y2:0,r1:10,r2:100},q=g.extend({},m,k),p,o=0,n,l;if(k.r1===d&&k.r2===d){p=j.createLinearGradient(q.x1,q.y1,q.x2,q.y2)}else{p=j.createRadialGradient(q.x1,q.y1,q.r1,q.x2,q.y2,q.r2)}for(l=1;l<=h.MAX_VALUE;l+=1){if(q["c"+l]){o+=1}else{break}}for(l=1;l<=o;l+=1){n=b.round((100/(o-1))*(l-1))/100;if(q["s"+l]===d){q["s"+l]=n}p.addColorStop(q["s"+l],q["c"+l])}return p};g.fn.pattern=function(m){var j=this.loadCanvas(),p=g.extend({},c.defaults,m),o,k=i.createElement("img");k.src=p.source;function n(){if(k.complete===true){o=j.createPattern(k,p.repeat)}else{throw"The pattern has not loaded yet"}}try{n()}catch(l){k.onload=n}return o};g.fn.clearCanvas=function(k){var j=this.loadCanvas(),l=g.extend({},c.defaults,k);if(l.fromCenter===true){l.x-=l.width/2;l.y-=l.height/2}j.beginPath();if(arg===d){j.clearRect(0,0,this.width(),this.height())}else{j.clearRect(l.x,l.y,l.width,l.height)}j.closePath();return this};g.fn.saveCanvas=function(){var j=this.loadCanvas();j.save();return this};g.fn.restoreCanvas=function(){var j=this.loadCanvas();j.restore();return this};g.fn.scaleCanvas=function(k){var j=this.loadCanvas(),l=g.extend({},c.defaults,k);j.save();j.scale(l.x,l.y);return this};g.fn.translateCanvas=function(k){var j=this.loadCanvas(),l=g.extend({},c.defaults,k);j.save();j.translate(l.x,l.y);return this};g.fn.rotateCanvas=function(k){var j=this.loadCanvas(),m=g.extend({},c.defaults,k),l=e(m);j.save();j.translate(m.x,m.y);j.rotate(m.angle*l);j.translate(-m.x,-m.y);return this};g.fn.drawRect=function(n){var s=this.loadCanvas(),m=g.extend({},c.defaults,n),o=e(m),l,q,k,p,j;a(s,m);if(m.fromCenter===true){m.x-=m.width/2;m.y-=m.height/2}if(m.cornerRadius>0){l=m.x;q=m.y;k=m.x+m.width;p=m.y+m.height;j=m.cornerRadius;if((k-l)-(2*j)<0){j=(k-l)/2}if((p-q)-(2*j)<0){j=(p-q)/2}s.beginPath();s.moveTo(l+j,q);s.lineTo(k-j,q);s.arc(k-j,q+j,j,270*o,360*o,false);s.lineTo(k,p-j);s.arc(k-j,p-j,j,0,90*o,false);s.lineTo(l+j,p);s.arc(l+j,p-j,j,90*o,180*o,false);s.lineTo(l,q+j);s.arc(l+j,q+j,j,180*o,270*o,false);s.fill();s.stroke();s.closePath()}else{s.fillRect(m.x,m.y,m.width,m.height);s.strokeRect(m.x,m.y,m.width,m.height)}return this};g.fn.drawArc=function(k){var j=this.loadCanvas(),m=g.extend({},c.defaults,k),l=e(m);a(j,m);if(m.fromCenter===false){m.x+=m.radius;m.y+=m.radius}j.beginPath();j.arc(m.x,m.y,m.radius,(m.start*l)-(b.PI/2),(m.end*l)-(b.PI/2),m.ccw);f(j,m);return this};g.fn.drawEllipse=function(k){var j=this.loadCanvas(),m=g.extend({},c.defaults,k),l=m.width*(4/3);a(j,m);if(m.fromCenter===false){m.x+=m.width/2;m.y+=m.height/2}m.x+=1e-10;m.y+=1e-10;j.beginPath();j.moveTo(m.x,m.y-m.height/2);j.bezierCurveTo(m.x-l/2,m.y-m.height/2,m.x-l/2,m.y+m.height/2,m.x,m.y+m.height/2);j.bezierCurveTo(m.x+l/2,m.y+m.height/2,m.x+l/2,m.y-m.height/2,m.x,m.y-m.height/2);j.closePath();j.fill();j.stroke();return this};g.fn.drawLine=function(n){var m=this.loadCanvas(),q=g.extend({},c.defaults,n),j=h.MAX_VALUE,k,p,o;a(m,q);m.beginPath();m.moveTo(q.x1,q.y1);for(k=2;k<j;k+=1){p=q["x"+k];o=q["y"+k];if(p&&o){m.lineTo(p,o)}else{break}}f(m,q);return this};g.fn.drawQuad=function(o){var s=this.loadCanvas(),n=g.extend({},c.defaults,o),p=h.MAX_VALUE,m,k,j,r,q;a(s,n);s.beginPath();s.moveTo(n.x1,n.y1);for(m=2;m<p;m+=1){k=n["x"+m];j=n["y"+m];r=n["cx"+(m-1)];q=n["cy"+(m-1)];if(k&&j&&r&&q){s.quadraticCurveTo(r,q,k,j)}else{break}}f(s,n);return this};g.fn.drawBezier=function(u){var w=this.loadCanvas(),q=g.extend({},c.defaults,u),v=h.MAX_VALUE,p=2,m=1,o,n,t,k,s,j,r;a(w,q);w.beginPath();w.moveTo(q.x1,q.y1);for(r=2;r<v;r+=1){o=q["x"+p];n=q["y"+p];t=q["cx"+m];k=q["cy"+m];s=q["cx"+(m+1)];j=q["cy"+(m+1)];if(o&&n&&t&&k&&s&&j){w.bezierCurveTo(t,k,s,j,o,n);p+=1;m+=2}else{break}}f(w,q);return this};g.fn.drawText=function(k){var j=this.loadCanvas(),l=g.extend({},c.defaults,k);a(j,l);j.textBaseline=l.baseline;j.textAlign=l.align;j.font=l.font;j.strokeText(l.text,l.x,l.y);j.fillText(l.text,l.x,l.y);return this};g.fn.drawImage=function(o){var k=this.loadCanvas(),p=g.extend({},c.defaults,o),l=i.createElement("img"),n=l.width/l.height;l.src=p.source;a(k,p);function j(){if(l.complete===true){if(o.width!==d&&o.height!==d){l.width=o.width;l.height=o.height}else{if(o.width!==d&&o.height===d){l.width=o.width;l.height=l.width/n}else{if(o.width===d&&o.height!==d){l.height=o.height;l.width=l.height*n}}}if(p.fromCenter===true){p.x-=l.width/2;p.y-=l.height/2}k.drawImage(l,p.x,p.y,l.width,l.height)}else{throw"The image has not loaded yet."}}try{j()}catch(m){l.onload=j}return this};g.fn.drawPolygon=function(m){var r=this.loadCanvas(),k=g.extend({},c.defaults,m),j,q,p,o,n=e(k),l;a(r,k);if(k.sides>=3){j=(b.PI/2)+(b.PI/k.sides)+(k.angle*n);q=(b.PI*2)/k.sides;for(l=0;l<k.sides;l+=1){p=k.x+(k.radius*b.cos(j))+1e-10;o=k.y+(k.radius*b.sin(j))+1e-10;if(k.fromCenter===false){p+=k.radius;o+=k.radius}r.lineTo(p,o);j+=q}f(r,k)}return this};return window.jCanvas=c}(jQuery,document,Math,Number));