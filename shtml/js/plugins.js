// Plugins

// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function(){log.history = log.history || [];log.history.push(arguments);arguments.callee = arguments.callee.caller;if(this.console) console.log( Array.prototype.slice.call(arguments) );};

// make it safe to use console.log always
(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info, log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();)b[a]=b[a]||c})(window.console=window.console||{});


// jQuery/helper plugins

//http://mths.be/placeholder v1.8.5 by @mathias
(function(g,a,$){var f='placeholder' in a.createElement('input'),b='placeholder' in a.createElement('textarea');if(f&&b){$.fn.placeholder=function(){return this};$.fn.placeholder.input=$.fn.placeholder.textarea=true}else{$.fn.placeholder=function(){return this.filter((f?'textarea':':input')+'[placeholder]').bind('focus.placeholder',c).bind('blur.placeholder',e).trigger('blur.placeholder').end()};$.fn.placeholder.input=f;$.fn.placeholder.textarea=b;$(function(){$('form').bind('submit.placeholder',function(){var h=$('.placeholder',this).each(c);setTimeout(function(){h.each(e)},10)})});$(g).bind('unload.placeholder',function(){$('.placeholder').val('')})}function d(i){var h={},j=/^jQuery\d+$/;$.each(i.attributes,function(l,k){if(k.specified&&!j.test(k.name)){h[k.name]=k.value}});return h}function c(){var h=$(this);if(h.val()===h.attr('placeholder')&&h.hasClass('placeholder')){if(h.data('placeholder-password')){h.hide().next().show().focus().attr('id',h.removeAttr('id').data('placeholder-id'))}else{h.val('').removeClass('placeholder')}}}function e(){var l,k=$(this),h=k,j=this.id;if(k.val()===''){if(k.is(':password')){if(!k.data('placeholder-textinput')){try{l=k.clone().attr({type:'text'})}catch(i){l=$('<input>').attr($.extend(d(this),{type:'text'}))}l.removeAttr('name').data('placeholder-password',true).data('placeholder-id',j).bind('focus.placeholder',c);k.data('placeholder-textinput',l).data('placeholder-id',j).before(l)}k=k.removeAttr('id').hide().prev().attr('id',j).show()}k.addClass('placeholder').val(k.attr('placeholder'))}else{k.removeClass('placeholder')}}}(this,document,jQuery));
// Invoke the plugin
$('input,textarea').placeholder();

//http://heartcode.robertpataki.com/canvasloader/
(function(a){var b=function(a,b){typeof b=="undefined"&&(b={});this.init(a,b)},c=b.prototype,d,e=["canvas","vml"],f=["oval","spiral","square","rect","roundRect"],g=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,h=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?true:false,i=!!document.createElement("canvas").getContext,j=true,k=function(a,b,c){var a=document.createElement(a),d;for(d in c)a[d]=c[d];typeof b!=="undefined"&&b.appendChild(a);return a},l=function(a,b){for(var c in b)a.style[c]=b[c];return a},m=function(a,b){for(var c in b)a.setAttribute(c,b[c]);return a},n=function(a,b,c,d){a.save();a.translate(b,c);a.rotate(d);a.translate(-b,-c);a.beginPath()};c.init=function(a,c){if(typeof c.safeVML==="boolean")j=c.safeVML;try{this.mum=document.getElementById(a)!==void 0?document.getElementById(a):document.body}catch(f){this.mum=document.body}c.id=typeof c.id!=="undefined"?c.id:"canvasLoader";this.cont=k("div",this.mum,{id:c.id});if(i)d=e[0],this.can=k("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=l(k("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{d=e[1];if(typeof b.vmlSheet==="undefined"){document.getElementsByTagName("head")[0].appendChild(k("style"));b.vmlSheet=document.styleSheets[document.styleSheets.length-1];var g=["group","oval","roundrect","fill"],h;for(h in g)b.vmlSheet.addRule(g[h],"behavior:url(#default#VML); position:absolute;")}this.vml=k("group",this.cont)}this.setColor(this.color);this.ready=true;this.draw();l(this.cont,{display:"none"})};c.cont={};c.can={};c.con={};c.cCan={};c.cCon={};c.ready=false;c.timer={};c.activeId=0;c.diameter=40;c.setDiameter=function(a){this.diameter=Math.round(Math.abs(a));this.redraw()};c.getDiameter=function(){return this.diameter};c.cRGB={};c.color="#000000";c.setColor=function(a){this.color=g.test(a)?a:"#000000";this.cRGB=this.getRGB(this.color);this.redraw()};c.getColor=function(){return this.color};c.shape=f[0];c.setShape=function(a){for(var b in f)if(a===f[b]){this.shape=a;this.redraw();break}};c.getShape=function(){return this.shape};c.density=40;c.setDensity=function(a){this.density=j&&d===e[1]?Math.round(Math.abs(a))<=40?Math.round(Math.abs(a)):40:Math.round(Math.abs(a));this.redraw()};c.getDensity=function(){return this.density};c.range=1.3;c.setRange=function(a){this.range=Math.abs(a);this.redraw()};c.getRange=function(){return this.range};c.speed=2;c.setSpeed=function(a){this.speed=Math.round(Math.abs(a));this.reset()};c.getSpeed=function(){return this.speed};c.fps=24;c.setFPS=function(a){this.fps=Math.round(Math.abs(a));this.reset()};c.getFPS=function(){return this.fps};c.getRGB=function(a){a=a.charAt(0)==="#"?a.substring(1,7):a;return{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}};c.draw=function(){var a=0,b,c,g,i,j,q,r,s=this.density,w=Math.round(s*this.range),x,y,z=0;y=this.cCon;var A=this.diameter;if(d===e[0]){y.clearRect(0,0,1e3,1e3);m(this.can,{width:A,height:A});for(m(this.cCan,{width:A,height:A});a<s;){x=a<=w?1-1/w*a:x=0;q=360-360/s*a;r=q/180*Math.PI;y.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+x.toString()+")";switch(this.shape){case f[0]:case f[1]:b=A*.07;i=A*.47+Math.cos(r)*(A*.47-b)-A*.47;j=A*.47+Math.sin(r)*(A*.47-b)-A*.47;y.beginPath();this.shape===f[1]?y.arc(A*.5+i,A*.5+j,b*x,0,Math.PI*2,false):y.arc(A*.5+i,A*.5+j,b,0,Math.PI*2,false);break;case f[2]:b=A*.12;i=Math.cos(r)*(A*.47-b)+A*.5;j=Math.sin(r)*(A*.47-b)+A*.5;n(y,i,j,r);y.fillRect(i,j-b*.5,b,b);break;case f[3]:case f[4]:c=A*.3,g=c*.27,i=Math.cos(r)*(g+(A-g)*.13)+A*.5,j=Math.sin(r)*(g+(A-g)*.13)+A*.5,n(y,i,j,r),this.shape===f[3]?y.fillRect(i,j-g*.5,c,g):(b=g*.55,y.moveTo(i+b,j-g*.5),y.lineTo(i+c-b,j-g*.5),y.quadraticCurveTo(i+c,j-g*.5,i+c,j-g*.5+b),y.lineTo(i+c,j-g*.5+g-b),y.quadraticCurveTo(i+c,j-g*.5+g,i+c-b,j-g*.5+g),y.lineTo(i+b,j-g*.5+g),y.quadraticCurveTo(i,j-g*.5+g,i,j-g*.5+g-b),y.lineTo(i,j-g*.5+b),y.quadraticCurveTo(i,j-g*.5,i+b,j-g*.5))}y.closePath();y.fill();y.restore();++a}}else{l(this.cont,{width:A,height:A});l(this.vml,{width:A,height:A});switch(this.shape){case f[0]:case f[1]:r="oval";b=140;break;case f[2]:r="roundrect";b=120;break;case f[3]:case f[4]:r="roundrect",b=300}c=g=b;i=500-g;for(j=-g*.5;a<s;){x=a<=w?1-1/w*a:x=0;q=270-360/s*a;switch(this.shape){case f[1]:c=g=b*x;i=500-b*.5-b*x*.5;j=(b-b*x)*.5;break;case f[0]:case f[2]:h&&(j=0,this.shape===f[2]&&(i=500-g*.5));break;case f[3]:case f[4]:c=b*.95,g=c*.28,h?(i=0,j=500-g*.5):(i=500-c,j=-g*.5),z=this.shape===f[4]?.6:0}y=m(l(k("group",this.vml),{width:1e3,height:1e3,rotation:q}),{coordsize:"1000,1000",coordorigin:"-500,-500"});y=l(k(r,y,{stroked:false,arcSize:z}),{width:c,height:g,top:j,left:i});k("fill",y,{color:this.color,opacity:x});++a}}this.tick(true)};c.clean=function(){if(d===e[0])this.con.clearRect(0,0,1e4,1e4);else{var a=this.vml;if(a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)}};c.redraw=function(){this.ready&&(this.clean(),this.draw())};c.reset=function(){typeof this.timer==="number"&&(this.hide(),this.show())};c.tick=function(a){var b=this.density,b=b>360?b/360:360/b,c=this.con,f=this.diameter;b*=this.speed;a||(this.activeId+=b);this.activeId>=360&&(this.activeId-=360);d===e[0]?(c.clearRect(0,0,f,f),n(c,f*.5,f*.5,Math.PI/180*this.activeId),c.drawImage(this.cCan,0,0,f,f),c.restore()):l(this.vml,{rotation:this.activeId})};c.show=function(){if(typeof this.timer!=="number"){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1e3/this.fps));l(this.cont,{display:"block"})}};c.hide=function(){typeof this.timer==="number"&&(clearInterval(this.timer),delete this.timer,l(this.cont,{display:"none"}))};c.kill=function(){var a=this.cont;typeof this.timer==="number"&&this.hide();d===e[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);for(var b in this)delete this[b]};a.CanvasLoader=b})(window);

//https://github.com/elektronaut/jquery.livetwitter jQuery LiveTwitter 1.7.3
(function(a){if(!a.fn.reverse){a.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)}}a.fn.liveTwitter=function(b,c,d){var e=this;a(this).each(function(){var f={};if(this.twitter){f=a.extend(this.twitter.settings,c);this.twitter.settings=f;if(b){this.twitter.query=b}if(this.twitter.interval){this.twitter.refresh()}if(d){this.twitter.callback=d}}else{f=a.extend({mode:"search",rate:15e3,limit:10,imageSize:24,refresh:true,timeLinks:true,replies:false,retweets:true,service:false,localization:{seconds:"seconds ago",minute:"a minute ago",minutes:"minutes ago",hour:"an hour ago",hours:"hours ago",day:"a day ago",days:"days ago"}},c);if(typeof f.showAuthor==="undefined"){f.showAuthor=f.mode==="user_timeline"?false:true}if(!window.twitter_callback){window.twitter_callback=function(){return true}}this.twitter={settings:f,query:b,interval:false,container:this,lastTimeStamp:0,callback:d,relativeTime:function(a){var b=Date.parse(a);var c=(Date.parse(Date())-b)/1e3;var d="";if(c<60){d=c+" "+f.localization.seconds}else if(c<120){d=f.localization.minute}else if(c<45*60){d=parseInt(c/60,10).toString()+" "+f.localization.minutes}else if(c<90*60){d=f.localization.hour}else if(c<24*60*60){d=""+parseInt(c/3600,10).toString()+" "+f.localization.hours}else if(c<48*60*60){d=f.localization.day}else{d=parseInt(c/86400,10).toString()+" "+f.localization.days}return d},updateTimestamps:function(){var b=this;a(b.container).find("span.time").each(function(){var c=b.settings.timeLinks?a(this).find("a"):a(this);c.html(b.relativeTime(this.timeStamp))})},apiURL:function(){var a={};var b=window.location.protocol==="https:"?"https:":"http:";var c="api.twitter.com/1/";var d="";if(this.settings.service){c=this.settings.service+"/api/"}if(this.settings.mode==="search"){c=this.settings.service?this.settings.service+"/api/":"search.twitter.com/";d="search";a={q:this.query&&this.query!==""?this.query:null,geocode:this.settings.geocode,lang:this.settings.lang,rpp:this.settings.rpp?this.settings.rpp:this.settings.limit}}else if(this.settings.mode==="user_timeline"||this.settings.mode==="home_timeline"){d="statuses/"+this.settings.mode+"/"+encodeURIComponent(this.query);a={count:this.settings.limit,include_rts:this.settings.mode==="user_timeline"&&this.settings.retweets?"1":null,exclude_replies:!this.settings.replies?"1":null}}else if(this.settings.mode==="favorites"){d="favorites";a={id:encodeURIComponent(this.query)}}else if(this.settings.mode==="list"){d=encodeURIComponent(this.query.user)+"/lists/"+encodeURIComponent(this.query.list)+"/statuses";a={per_page:this.settings.limit}}var e=[];for(var f in a){if(a.hasOwnProperty(f)&&typeof a[f]!=="undefined"&&a[f]!==null){e[e.length]=f+"="+encodeURIComponent(a[f])}}e=e.join("&");return b+"//"+c+d+".json?"+e+"&callback=?"},parseTweet:function(b){var c={id:b.id_str?b.id_str:b.id,text:b.text,created_at:b.created_at};if(this.settings.mode==="search"){c=a.extend(c,{screen_name:b.from_user,profile_image_url:b.profile_image_url})}else{c=a.extend(c,{screen_name:b.user.screen_name,profile_image_url:b.user.profile_image_url,created_at:b.created_at.replace(/^(\w+)\s(\w+)\s(\d+)(.*)(\s\d+)$/,"$1, $3 $2$5$4")})}if(this.settings.service){c=a.extend(c,{url:"http://"+this.settings.service+"/notice/"+c.id,profile_url:"http://"+this.settings.service+"/"+b.from_user});if(window.location.protocol==="https:"){c.profile_image_url=c.profile_image_url.replace("http:","https:")}}else{c=a.extend(c,{url:"http://twitter.com/#!/"+c.screen_name+"/status/"+c.id,profile_url:"http://twitter.com/#!/"+c.screen_name});if(window.location.protocol==="https:"){var d=c.profile_image_url.match(/http[s]?:\/\/a[0-9]\.twimg\.com\/(\w+)\/(\w+)\/(.*?)\.(\w+)/i);if(d){c.profile_image_url="https://s3.amazonaws.com/twitter_production/"+d[1]+"/"+d[2]+"/"+d[3]+"."+d[4]}else{c.profile_image_url=c.profile_image_url.replace("http:","https:")}}}return c},parseText:function(a){a=a.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/g,function(a){return'<a href="'+a+'" rel="external">'+a+"</a>"});if(!this.settings.service){a=a.replace(/@[A-Za-z0-9_]+/g,function(a){return'<a href="http://twitter.com/#!/'+a.replace(/^@/,"")+'" rel="external">'+a+"</a>"});a=a.replace(/#[A-Za-z0-9_\-]+/g,function(a){return'<a href="http://twitter.com/#!/search?q='+a.replace(/^#/,"%23")+'" rel="external">'+a+"</a>"})}else{a=a.replace(/@[A-Za-z0-9_]+/g,function(a){return'<a href="http://'+f.service+"/"+a.replace(/^@/,"")+'" rel="external">'+a+"</a>"});a=a.replace(/#[A-Za-z0-9_\-]+/g,function(a){return'<a href="http://'+f.service+"/search/notice?q?"+a.replace(/^#/,"%23")+'" rel="external">'+a+"</a>"})}return a},renderTweet:function(a){var b='<div class="tweet tweet-'+a.id+'">';if(this.settings.showAuthor){b+='<img width="'+this.settings.imageSize+'" height="'+this.settings.imageSize+'" src="'+a.profile_image_url+'" />';b+='<p class="text"><span class="username"><a href="'+a.profile_url+'" rel="external">'+a.screen_name+"</a>:</span> "}else{b+='<p class="text"> '}b+=this.parseText(a.text);if(this.settings.timeLinks){b+=' <span class="time">';b+='<a href="'+a.url+'" rel="external">';b+=this.relativeTime(a.created_at);b+="</a></span>"}else{b+=' <span class="time">'+this.relativeTime(a.created_at)+"</span>"}b+="</p></div>";return b},refresh:function(b){var c=this;if(c.settings.refresh||b){a.getJSON(c.apiURL(),function(d){var f=0;var g=c.settings.mode==="search"?d.results:d;a(g).reverse().each(function(){var d=c.parseTweet(this);if(!c.settings.filter||c.settings.filter(this)){if(Date.parse(d.created_at)>c.lastTimeStamp){a(c.container).prepend(c.renderTweet(d));a(c.container).find("span.time:first").each(function(){this.timeStamp=d.created_at});if(!b){a(c.container).find(".tweet-"+d.id).hide().fadeIn()}c.lastTimeStamp=Date.parse(d.created_at);f+=1}}});if(f>0){a(c.container).find("div.tweet:gt("+(c.settings.limit-1)+")").remove();if(c.callback){c.callback(e,f)}a(e).trigger("tweets")}})}},start:function(){var a=this;if(!this.interval){this.interval=setInterval(function(){a.refresh()},a.settings.rate);this.refresh(true)}},stop:function(){if(this.interval){clearInterval(this.interval);this.interval=false}},clear:function(){a(this.container).find("div.tweet").remove();this.lastTimeStamp=null}};var g=this.twitter;this.timeInterval=setInterval(function(){g.updateTimestamps()},5e3);this.twitter.start()}});return this}})(jQuery);
