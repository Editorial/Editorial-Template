// Plugins

// usage: log('inside coolFunc', this, arguments);
// paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/
window.log = function(){log.history = log.history || [];log.history.push(arguments);arguments.callee = arguments.callee.caller;if(this.console) console.log( Array.prototype.slice.call(arguments) );};

// make it safe to use console.log always
(function(b){function c(){}for(var d="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info, log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),a;a=d.pop();)b[a]=b[a]||c})(window.console=window.console||{});


// jQuery/helper plugins

//http://mths.be/placeholder v1.8.5 by @mathias
(function(g,a,$){var f='placeholder' in a.createElement('input'),b='placeholder' in a.createElement('textarea');if(f&&b){$.fn.placeholder=function(){return this};$.fn.placeholder.input=$.fn.placeholder.textarea=true}else{$.fn.placeholder=function(){return this.filter((f?'textarea':':input')+'[placeholder]').bind('focus.placeholder',c).bind('blur.placeholder',e).trigger('blur.placeholder').end()};$.fn.placeholder.input=f;$.fn.placeholder.textarea=b;$(function(){$('form').bind('submit.placeholder',function(){var h=$('.placeholder',this).each(c);setTimeout(function(){h.each(e)},10)})});$(g).bind('unload.placeholder',function(){$('.placeholder').val('')})}function d(i){var h={},j=/^jQuery\d+$/;$.each(i.attributes,function(l,k){if(k.specified&&!j.test(k.name)){h[k.name]=k.value}});return h}function c(){var h=$(this);if(h.val()===h.attr('placeholder')&&h.hasClass('placeholder')){if(h.data('placeholder-password')){h.hide().next().show().focus().attr('id',h.removeAttr('id').data('placeholder-id'))}else{h.val('').removeClass('placeholder')}}}function e(){var l,k=$(this),h=k,j=this.id;if(k.val()===''){if(k.is(':password')){if(!k.data('placeholder-textinput')){try{l=k.clone().attr({type:'text'})}catch(i){l=$('<input>').attr($.extend(d(this),{type:'text'}))}l.removeAttr('name').data('placeholder-password',true).data('placeholder-id',j).bind('focus.placeholder',c);k.data('placeholder-textinput',l).data('placeholder-id',j).before(l)}k=k.removeAttr('id').hide().prev().attr('id',j).show()}k.addClass('placeholder').val(k.attr('placeholder'))}else{k.removeClass('placeholder')}}}(this,document,jQuery));
// Invoke the plugin
$('input,textarea').placeholder();

//http://heartcode.robertpataki.com/canvasloader/
(function(a){var b=function(a,b){typeof b=="undefined"&&(b={});this.init(a,b)},c=b.prototype,d,e=["canvas","vml"],f=["oval","spiral","square","rect","roundRect"],g=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,h=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?true:false,i=!!document.createElement("canvas").getContext,j=true,k=function(a,b,c){var a=document.createElement(a),d;for(d in c)a[d]=c[d];typeof b!=="undefined"&&b.appendChild(a);return a},l=function(a,b){for(var c in b)a.style[c]=b[c];return a},m=function(a,b){for(var c in b)a.setAttribute(c,b[c]);return a},n=function(a,b,c,d){a.save();a.translate(b,c);a.rotate(d);a.translate(-b,-c);a.beginPath()};c.init=function(a,c){if(typeof c.safeVML==="boolean")j=c.safeVML;try{this.mum=document.getElementById(a)!==void 0?document.getElementById(a):document.body}catch(f){this.mum=document.body}c.id=typeof c.id!=="undefined"?c.id:"canvasLoader";this.cont=k("div",this.mum,{id:c.id});if(i)d=e[0],this.can=k("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=l(k("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{d=e[1];if(typeof b.vmlSheet==="undefined"){document.getElementsByTagName("head")[0].appendChild(k("style"));b.vmlSheet=document.styleSheets[document.styleSheets.length-1];var g=["group","oval","roundrect","fill"],h;for(h in g)b.vmlSheet.addRule(g[h],"behavior:url(#default#VML); position:absolute;")}this.vml=k("group",this.cont)}this.setColor(this.color);this.ready=true;this.draw();l(this.cont,{display:"none"})};c.cont={};c.can={};c.con={};c.cCan={};c.cCon={};c.ready=false;c.timer={};c.activeId=0;c.diameter=40;c.setDiameter=function(a){this.diameter=Math.round(Math.abs(a));this.redraw()};c.getDiameter=function(){return this.diameter};c.cRGB={};c.color="#000000";c.setColor=function(a){this.color=g.test(a)?a:"#000000";this.cRGB=this.getRGB(this.color);this.redraw()};c.getColor=function(){return this.color};c.shape=f[0];c.setShape=function(a){for(var b in f)if(a===f[b]){this.shape=a;this.redraw();break}};c.getShape=function(){return this.shape};c.density=40;c.setDensity=function(a){this.density=j&&d===e[1]?Math.round(Math.abs(a))<=40?Math.round(Math.abs(a)):40:Math.round(Math.abs(a));this.redraw()};c.getDensity=function(){return this.density};c.range=1.3;c.setRange=function(a){this.range=Math.abs(a);this.redraw()};c.getRange=function(){return this.range};c.speed=2;c.setSpeed=function(a){this.speed=Math.round(Math.abs(a));this.reset()};c.getSpeed=function(){return this.speed};c.fps=24;c.setFPS=function(a){this.fps=Math.round(Math.abs(a));this.reset()};c.getFPS=function(){return this.fps};c.getRGB=function(a){a=a.charAt(0)==="#"?a.substring(1,7):a;return{r:parseInt(a.substring(0,2),16),g:parseInt(a.substring(2,4),16),b:parseInt(a.substring(4,6),16)}};c.draw=function(){var a=0,b,c,g,i,j,q,r,s=this.density,w=Math.round(s*this.range),x,y,z=0;y=this.cCon;var A=this.diameter;if(d===e[0]){y.clearRect(0,0,1e3,1e3);m(this.can,{width:A,height:A});for(m(this.cCan,{width:A,height:A});a<s;){x=a<=w?1-1/w*a:x=0;q=360-360/s*a;r=q/180*Math.PI;y.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+x.toString()+")";switch(this.shape){case f[0]:case f[1]:b=A*.07;i=A*.47+Math.cos(r)*(A*.47-b)-A*.47;j=A*.47+Math.sin(r)*(A*.47-b)-A*.47;y.beginPath();this.shape===f[1]?y.arc(A*.5+i,A*.5+j,b*x,0,Math.PI*2,false):y.arc(A*.5+i,A*.5+j,b,0,Math.PI*2,false);break;case f[2]:b=A*.12;i=Math.cos(r)*(A*.47-b)+A*.5;j=Math.sin(r)*(A*.47-b)+A*.5;n(y,i,j,r);y.fillRect(i,j-b*.5,b,b);break;case f[3]:case f[4]:c=A*.3,g=c*.27,i=Math.cos(r)*(g+(A-g)*.13)+A*.5,j=Math.sin(r)*(g+(A-g)*.13)+A*.5,n(y,i,j,r),this.shape===f[3]?y.fillRect(i,j-g*.5,c,g):(b=g*.55,y.moveTo(i+b,j-g*.5),y.lineTo(i+c-b,j-g*.5),y.quadraticCurveTo(i+c,j-g*.5,i+c,j-g*.5+b),y.lineTo(i+c,j-g*.5+g-b),y.quadraticCurveTo(i+c,j-g*.5+g,i+c-b,j-g*.5+g),y.lineTo(i+b,j-g*.5+g),y.quadraticCurveTo(i,j-g*.5+g,i,j-g*.5+g-b),y.lineTo(i,j-g*.5+b),y.quadraticCurveTo(i,j-g*.5,i+b,j-g*.5))}y.closePath();y.fill();y.restore();++a}}else{l(this.cont,{width:A,height:A});l(this.vml,{width:A,height:A});switch(this.shape){case f[0]:case f[1]:r="oval";b=140;break;case f[2]:r="roundrect";b=120;break;case f[3]:case f[4]:r="roundrect",b=300}c=g=b;i=500-g;for(j=-g*.5;a<s;){x=a<=w?1-1/w*a:x=0;q=270-360/s*a;switch(this.shape){case f[1]:c=g=b*x;i=500-b*.5-b*x*.5;j=(b-b*x)*.5;break;case f[0]:case f[2]:h&&(j=0,this.shape===f[2]&&(i=500-g*.5));break;case f[3]:case f[4]:c=b*.95,g=c*.28,h?(i=0,j=500-g*.5):(i=500-c,j=-g*.5),z=this.shape===f[4]?.6:0}y=m(l(k("group",this.vml),{width:1e3,height:1e3,rotation:q}),{coordsize:"1000,1000",coordorigin:"-500,-500"});y=l(k(r,y,{stroked:false,arcSize:z}),{width:c,height:g,top:j,left:i});k("fill",y,{color:this.color,opacity:x});++a}}this.tick(true)};c.clean=function(){if(d===e[0])this.con.clearRect(0,0,1e4,1e4);else{var a=this.vml;if(a.hasChildNodes())for(;a.childNodes.length>=1;)a.removeChild(a.firstChild)}};c.redraw=function(){this.ready&&(this.clean(),this.draw())};c.reset=function(){typeof this.timer==="number"&&(this.hide(),this.show())};c.tick=function(a){var b=this.density,b=b>360?b/360:360/b,c=this.con,f=this.diameter;b*=this.speed;a||(this.activeId+=b);this.activeId>=360&&(this.activeId-=360);d===e[0]?(c.clearRect(0,0,f,f),n(c,f*.5,f*.5,Math.PI/180*this.activeId),c.drawImage(this.cCan,0,0,f,f),c.restore()):l(this.vml,{rotation:this.activeId})};c.show=function(){if(typeof this.timer!=="number"){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1e3/this.fps));l(this.cont,{display:"block"})}};c.hide=function(){typeof this.timer==="number"&&(clearInterval(this.timer),delete this.timer,l(this.cont,{display:"none"}))};c.kill=function(){var a=this.cont;typeof this.timer==="number"&&this.hide();d===e[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);for(var b in this)delete this[b]};a.CanvasLoader=b})(window);

//https://github.com/elektronaut/jquery.livetwitter jQuery LiveTwitter 1.7.3
(function(a){if(!a.fn.reverse){a.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)}}a.fn.liveTwitter=function(b,c,d){var e=this;a(this).each(function(){var f={};if(this.twitter){f=a.extend(this.twitter.settings,c);this.twitter.settings=f;if(b){this.twitter.query=b}if(this.twitter.interval){this.twitter.refresh()}if(d){this.twitter.callback=d}}else{f=a.extend({mode:"search",rate:15e3,limit:10,imageSize:24,refresh:true,timeLinks:true,replies:false,retweets:true,service:false,localization:{seconds:"seconds ago",minute:"a minute ago",minutes:"minutes ago",hour:"an hour ago",hours:"hours ago",day:"a day ago",days:"days ago"}},c);if(typeof f.showAuthor==="undefined"){f.showAuthor=f.mode==="user_timeline"?false:true}if(!window.twitter_callback){window.twitter_callback=function(){return true}}this.twitter={settings:f,query:b,interval:false,container:this,lastTimeStamp:0,callback:d,relativeTime:function(a){var b=Date.parse(a);var c=(Date.parse(Date())-b)/1e3;var d="";if(c<60){d=c+" "+f.localization.seconds}else if(c<120){d=f.localization.minute}else if(c<45*60){d=parseInt(c/60,10).toString()+" "+f.localization.minutes}else if(c<90*60){d=f.localization.hour}else if(c<24*60*60){d=""+parseInt(c/3600,10).toString()+" "+f.localization.hours}else if(c<48*60*60){d=f.localization.day}else{d=parseInt(c/86400,10).toString()+" "+f.localization.days}return d},updateTimestamps:function(){var b=this;a(b.container).find("span.time").each(function(){var c=b.settings.timeLinks?a(this).find("a"):a(this);c.html(b.relativeTime(this.timeStamp))})},apiURL:function(){var a={};var b=window.location.protocol==="https:"?"https:":"http:";var c="api.twitter.com/1/";var d="";if(this.settings.service){c=this.settings.service+"/api/"}if(this.settings.mode==="search"){c=this.settings.service?this.settings.service+"/api/":"search.twitter.com/";d="search";a={q:this.query&&this.query!==""?this.query:null,geocode:this.settings.geocode,lang:this.settings.lang,rpp:this.settings.rpp?this.settings.rpp:this.settings.limit}}else if(this.settings.mode==="user_timeline"||this.settings.mode==="home_timeline"){d="statuses/"+this.settings.mode+"/"+encodeURIComponent(this.query);a={count:this.settings.limit,include_rts:this.settings.mode==="user_timeline"&&this.settings.retweets?"1":null,exclude_replies:!this.settings.replies?"1":null}}else if(this.settings.mode==="favorites"){d="favorites";a={id:encodeURIComponent(this.query)}}else if(this.settings.mode==="list"){d=encodeURIComponent(this.query.user)+"/lists/"+encodeURIComponent(this.query.list)+"/statuses";a={per_page:this.settings.limit}}var e=[];for(var f in a){if(a.hasOwnProperty(f)&&typeof a[f]!=="undefined"&&a[f]!==null){e[e.length]=f+"="+encodeURIComponent(a[f])}}e=e.join("&");return b+"//"+c+d+".json?"+e+"&callback=?"},parseTweet:function(b){var c={id:b.id_str?b.id_str:b.id,text:b.text,created_at:b.created_at};if(this.settings.mode==="search"){c=a.extend(c,{screen_name:b.from_user,profile_image_url:b.profile_image_url})}else{c=a.extend(c,{screen_name:b.user.screen_name,profile_image_url:b.user.profile_image_url,created_at:b.created_at.replace(/^(\w+)\s(\w+)\s(\d+)(.*)(\s\d+)$/,"$1, $3 $2$5$4")})}if(this.settings.service){c=a.extend(c,{url:"http://"+this.settings.service+"/notice/"+c.id,profile_url:"http://"+this.settings.service+"/"+b.from_user});if(window.location.protocol==="https:"){c.profile_image_url=c.profile_image_url.replace("http:","https:")}}else{c=a.extend(c,{url:"http://twitter.com/#!/"+c.screen_name+"/status/"+c.id,profile_url:"http://twitter.com/#!/"+c.screen_name});if(window.location.protocol==="https:"){var d=c.profile_image_url.match(/http[s]?:\/\/a[0-9]\.twimg\.com\/(\w+)\/(\w+)\/(.*?)\.(\w+)/i);if(d){c.profile_image_url="https://s3.amazonaws.com/twitter_production/"+d[1]+"/"+d[2]+"/"+d[3]+"."+d[4]}else{c.profile_image_url=c.profile_image_url.replace("http:","https:")}}}return c},parseText:function(a){a=a.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/g,function(a){return'<a href="'+a+'" rel="external">'+a+"</a>"});if(!this.settings.service){a=a.replace(/@[A-Za-z0-9_]+/g,function(a){return'<a href="http://twitter.com/#!/'+a.replace(/^@/,"")+'" rel="external">'+a+"</a>"});a=a.replace(/#[A-Za-z0-9_\-]+/g,function(a){return'<a href="http://twitter.com/#!/search?q='+a.replace(/^#/,"%23")+'" rel="external">'+a+"</a>"})}else{a=a.replace(/@[A-Za-z0-9_]+/g,function(a){return'<a href="http://'+f.service+"/"+a.replace(/^@/,"")+'" rel="external">'+a+"</a>"});a=a.replace(/#[A-Za-z0-9_\-]+/g,function(a){return'<a href="http://'+f.service+"/search/notice?q?"+a.replace(/^#/,"%23")+'" rel="external">'+a+"</a>"})}return a},renderTweet:function(a){var b='<div class="tweet tweet-'+a.id+'">';if(this.settings.showAuthor){b+='<img width="'+this.settings.imageSize+'" height="'+this.settings.imageSize+'" src="'+a.profile_image_url+'" />';b+='<p class="text"><span class="username"><a href="'+a.profile_url+'" rel="external">'+a.screen_name+"</a>:</span> "}else{b+='<p class="text"> '}b+=this.parseText(a.text);if(this.settings.timeLinks){b+=' <span class="time">';b+='<a href="'+a.url+'" rel="external">';b+=this.relativeTime(a.created_at);b+="</a></span>"}else{b+=' <span class="time">'+this.relativeTime(a.created_at)+"</span>"}b+="</p></div>";return b},refresh:function(b){var c=this;if(c.settings.refresh||b){a.getJSON(c.apiURL(),function(d){var f=0;var g=c.settings.mode==="search"?d.results:d;a(g).reverse().each(function(){var d=c.parseTweet(this);if(!c.settings.filter||c.settings.filter(this)){if(Date.parse(d.created_at)>c.lastTimeStamp){a(c.container).prepend(c.renderTweet(d));a(c.container).find("span.time:first").each(function(){this.timeStamp=d.created_at});if(!b){a(c.container).find(".tweet-"+d.id).hide().fadeIn()}c.lastTimeStamp=Date.parse(d.created_at);f+=1}}});if(f>0){a(c.container).find("div.tweet:gt("+(c.settings.limit-1)+")").remove();if(c.callback){c.callback(e,f)}a(e).trigger("tweets")}})}},start:function(){var a=this;if(!this.interval){this.interval=setInterval(function(){a.refresh()},a.settings.rate);this.refresh(true)}},stop:function(){if(this.interval){clearInterval(this.interval);this.interval=false}},clear:function(){a(this.container).find("div.tweet").remove();this.lastTimeStamp=null}};var g=this.twitter;this.timeInterval=setInterval(function(){g.updateTimestamps()},5e3);this.twitter.start()}});return this}})(jQuery);

//http://staff.jordan-delcros.com/divers/ios/jgesture/index.html
/**
 * jGestures: a jQuery plugin for gesture events
 * Copyright 2010-2011 Neue Digitale / Razorfish GmbH
 * Copyright 2011-2012, Razorfish GmbH
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * @copyright Razorfish GmbH
 * @author martin.krause@razorfish.de
 * @version 0.90-shake
 * @requires jQuery JavaScript Library v1.4.2 - http://jquery.com/- Copyright 2010, John Resig- Dual licensed under the MIT or GPL Version 2 licenses. http://jquery.org/license
 */
(function(c){c.jGestures={};c.jGestures.defaults={};c.jGestures.defaults.thresholdShake={requiredShakes:10,freezeShakes:100,frontback:{sensitivity:10},leftright:{sensitivity:10},updown:{sensitivity:10}};c.jGestures.defaults.thresholdPinchopen=0.05;c.jGestures.defaults.thresholdPinchmove=0.05;c.jGestures.defaults.thresholdPinch=0.05;c.jGestures.defaults.thresholdPinchclose=0.05;c.jGestures.defaults.thresholdRotatecw=5;c.jGestures.defaults.thresholdRotateccw=5;c.jGestures.defaults.thresholdMove=20;c.jGestures.defaults.thresholdSwipe=100;c.jGestures.data={};c.jGestures.data.capableDevicesInUserAgentString=["iPad","iPhone","iPod","Mobile Safari"];c.jGestures.data.hasGestures=(function(){var k;for(k=0;k<c.jGestures.data.capableDevicesInUserAgentString.length;k++){if(navigator.userAgent.indexOf(c.jGestures.data.capableDevicesInUserAgentString[k])!==-1){return true}}return false})();c.hasGestures=c.jGestures.data.hasGestures;c.jGestures.events={touchstart:"jGestures.touchstart",touchendStart:"jGestures.touchend;start",touchendProcessed:"jGestures.touchend;processed",gesturestart:"jGestures.gesturestart",gestureendStart:"jGestures.gestureend;start",gestureendProcessed:"jGestures.gestureend;processed"};jQuery.each({orientationchange_orientationchange01:"orientationchange",gestureend_pinchopen01:"pinchopen",gestureend_pinchclose01:"pinchclose",gestureend_rotatecw01:"rotatecw",gestureend_rotateccw01:"rotateccw",gesturechange_pinch01:"pinch",gesturechange_rotate01:"rotate",touchstart_swipe13:"swipemove",touchstart_swipe01:"swipeone",touchstart_swipe02:"swipetwo",touchstart_swipe03:"swipethree",touchstart_swipe04:"swipefour",touchstart_swipe05:"swipeup",touchstart_swipe06:"swiperightup",touchstart_swipe07:"swiperight",touchstart_swipe08:"swiperightdown",touchstart_swipe09:"swipedown",touchstart_swipe10:"swipeleftdown",touchstart_swipe11:"swipeleft",touchstart_swipe12:"swipeleftup",touchstart_tap01:"tapone",touchstart_tap02:"taptwo",touchstart_tap03:"tapthree",touchstart_tap04:"tapfour",devicemotion_shake01:"shake",devicemotion_shake02:"shakefrontback",devicemotion_shake03:"shakeleftright",devicemotion_shake04:"shakeupdown"},function(l,k){jQuery.event.special[k]={setup:function(){var r=l.split("_");var o=r[0];var m=r[1].slice(0,r[1].length-2);var p=jQuery(this);var q;var n;if(!p.data("ojQueryGestures")||!p.data("ojQueryGestures")[o]){q=p.data("ojQueryGestures")||{};n={};n[o]=true;c.extend(true,q,n);p.data("ojQueryGestures",q);if(c.hasGestures){switch(m){case"orientationchange":p.get(0).addEventListener("orientationchange",a,false);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":p.get(0).addEventListener("devicemotion",b,false);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":p.get(0).addEventListener("touchstart",h,false);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":p.get(0).addEventListener("gesturestart",e,false);p.get(0).addEventListener("gestureend",i,false);break;case"pinch":case"rotate":p.get(0).addEventListener("gesturestart",e,false);p.get(0).addEventListener("gesturechange",f,false);break}}else{switch(m){case"tap":case"swipe":p.bind("mousedown",h);break;case"orientationchange":case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":case"pinch":case"rotate":case"shake":case"tilt":break}}}return false},add:function(n){var m=jQuery(this);var o=m.data("ojQueryGestures");o[n.type]={originalType:n.type};return false},remove:function(n){var m=jQuery(this);var o=m.data("ojQueryGestures");o[n.type]=false;m.data("ojQueryGestures",o);return false},teardown:function(){var r=l.split("_");var o=r[0];var m=r[1].slice(0,r[1].length-2);var p=jQuery(this);var q;var n;if(!p.data("ojQueryGestures")||!p.data("ojQueryGestures")[o]){q=p.data("ojQueryGestures")||{};n={};n[o]=false;c.extend(true,q,n);p.data("ojQueryGestures",q);if(c.hasGestures){switch(m){case"orientationchange":p.get(0).removeEventListener("orientationchange",a,false);break;case"shake":case"shakefrontback":case"shakeleftright":case"shakeupdown":case"tilt":p.get(0).removeEventListener("devicemotion",b,false);break;case"tap":case"swipe":case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":p.get(0).removeEventListener("touchstart",h,false);p.get(0).removeEventListener("touchmove",g,false);p.get(0).removeEventListener("touchend",j,false);break;case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":p.get(0).removeEventListener("gesturestart",e,false);p.get(0).removeEventListener("gestureend",i,false);break;case"pinch":case"rotate":p.get(0).removeEventListener("gesturestart",e,false);p.get(0).removeEventListener("gesturechange",f,false);break}}else{switch(m){case"tap":case"swipe":p.unbind("mousedown",h);p.unbind("mousemove",g);p.unbind("mouseup",j);break;case"orientationchange":case"pinchopen":case"pinchclose":case"rotatecw":case"rotateccw":case"pinch":case"rotate":case"shake":case"tilt":break}}}return false}}});function d(k){k.startMove=(k.startMove)?k.startMove:{startX:null,startY:null,timestamp:null};var l=new Date().getTime();var m;var n;if(k.touches){n=[{lastX:k.deltaX,lastY:k.deltaY,moved:null,startX:k.screenX-k.startMove.screenX,startY:k.screenY-k.startMove.screenY}];m={vector:k.vector||null,orientation:window.orientation||null,lastX:((n[0].lastX>0)?+1:((n[0].lastX<0)?-1:0)),lastY:((n[0].lastY>0)?+1:((n[0].lastY<0)?-1:0)),startX:((n[0].startX>0)?+1:((n[0].startX<0)?-1:0)),startY:((n[0].startY>0)?+1:((n[0].startY<0)?-1:0))};n[0].moved=Math.sqrt(Math.pow(Math.abs(n[0].startX),2)+Math.pow(Math.abs(n[0].startY),2))}return{type:k.type||null,originalEvent:k.event||null,delta:n||null,direction:m||{orientation:window.orientation||null,vector:k.vector||null},duration:(k.duration)?k.duration:(k.startMove.timestamp)?l-k.timestamp:null,rotation:k.rotation||null,scale:k.scale||null,description:k.description||[k.type,":",k.touches,":",((n[0].lastX!=0)?((n[0].lastX>0)?"right":"left"):"steady"),":",((n[0].lastY!=0)?((n[0].lastY>0)?"down":"up"):"steady")].join("")}}function a(l){var k=["landscape:clockwise:","portrait:default:","landscape:counterclockwise:","portrait:upsidedown:"];c(window).triggerHandler("orientationchange",{direction:{orientation:window.orientation},description:["orientationchange:",k[((window.orientation/90)+1)],window.orientation].join("")})}function b(r){var k;var t=jQuery(window);var o=t.data("ojQueryGestures");var m=c.jGestures.defaults.thresholdShake;var n=o.oDeviceMotionLastDevicePosition||{accelerationIncludingGravity:{x:0,y:0,z:0},shake:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeleftright:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakefrontback:{eventCount:0,intervalsPassed:0,intervalsFreeze:0},shakeupdown:{eventCount:0,intervalsPassed:0,intervalsFreeze:0}};var q={accelerationIncludingGravity:{x:r.accelerationIncludingGravity.x,y:r.accelerationIncludingGravity.y,z:r.accelerationIncludingGravity.z},shake:{eventCount:n.shake.eventCount,intervalsPassed:n.shake.intervalsPassed,intervalsFreeze:n.shake.intervalsFreeze},shakeleftright:{eventCount:n.shakeleftright.eventCount,intervalsPassed:n.shakeleftright.intervalsPassed,intervalsFreeze:n.shakeleftright.intervalsFreeze},shakefrontback:{eventCount:n.shakefrontback.eventCount,intervalsPassed:n.shakefrontback.intervalsPassed,intervalsFreeze:n.shakefrontback.intervalsFreeze},shakeupdown:{eventCount:n.shakeupdown.eventCount,intervalsPassed:n.shakeupdown.intervalsPassed,intervalsFreeze:n.shakeupdown.intervalsFreeze}};var p;var s;var l;for(k in o){switch(k){case"shake":case"shakeleftright":case"shakefrontback":case"shakeupdown":p=[];s=[];p.push(k);if(++q[k].intervalsFreeze>m.freezeShakes&&q[k].intervalsFreeze<(2*m.freezeShakes)){break}q[k].intervalsFreeze=0;q[k].intervalsPassed++;if((k==="shake"||k==="shakeleftright")&&(q.accelerationIncludingGravity.x>m.leftright.sensitivity||q.accelerationIncludingGravity.x<(-1*m.leftright.sensitivity))){p.push("leftright");p.push("x-axis")}if((k==="shake"||k==="shakefrontback")&&(q.accelerationIncludingGravity.y>m.frontback.sensitivity||q.accelerationIncludingGravity.y<(-1*m.frontback.sensitivity))){p.push("frontback");p.push("y-axis")}if((k==="shake"||k==="shakeupdown")&&(q.accelerationIncludingGravity.z+9.81>m.updown.sensitivity||q.accelerationIncludingGravity.z+9.81<(-1*m.updown.sensitivity))){p.push("updown");p.push("z-axis")}if(p.length>1){if(++q[k].eventCount==m.requiredShakes&&(q[k].intervalsPassed)<m.freezeShakes){t.triggerHandler(k,d({type:k,description:p.join(":"),event:r,duration:q[k].intervalsPassed*5}));q[k].eventCount=0;q[k].intervalsPassed=0;q[k].intervalsFreeze=m.freezeShakes+1}else{if(q[k].eventCount==m.requiredShakes&&(q[k].intervalsPassed)>m.freezeShakes){q[k].eventCount=0;q[k].intervalsPassed=0}}}break}l={};l.oDeviceMotionLastDevicePosition=q;t.data("ojQueryGestures",c.extend(true,o,l))}}function h(l){var k=jQuery(l.currentTarget);k.triggerHandler(c.jGestures.events.touchstart,l);if(c.hasGestures){l.currentTarget.addEventListener("touchmove",g,false);l.currentTarget.addEventListener("touchend",j,false)}else{k.bind("mousemove",g);k.bind("mouseup",j)}var n=k.data("ojQueryGestures");var m=(l.touches)?l.touches[0]:l;var o={};o.oLastSwipemove={screenX:m.screenX,screenY:m.screenY,timestamp:new Date().getTime()};o.oStartTouch={screenX:m.screenX,screenY:m.screenY,timestamp:new Date().getTime()};k.data("ojQueryGestures",c.extend(true,n,o))}function g(t){var v=jQuery(t.currentTarget);var s=v.data("ojQueryGestures");var q=!!t.touches;var l=(q)?t.changedTouches[0].screenX:t.screenX;var k=(q)?t.changedTouches[0].screenY:t.screenY;var r=s.oLastSwipemove;var o=l-r.screenX;var n=k-r.screenY;var u;if(!!s.oLastSwipemove){u=d({type:"swipemove",touches:(q)?t.touches.length:"1",screenY:k,screenX:l,deltaY:n,deltaX:o,startMove:r,event:t,timestamp:r.timestamp});v.triggerHandler(u.type,u)}var m={};var p=(t.touches)?t.touches[0]:t;m.oLastSwipemove={screenX:p.screenX,screenY:p.screenY,timestamp:new Date().getTime()};v.data("ojQueryGestures",c.extend(true,s,m))}function j(r){var v=jQuery(r.currentTarget);var x=!!r.changedTouches;var u=(x)?r.changedTouches.length:"1";var p=(x)?r.changedTouches[0].screenX:r.screenX;var o=(x)?r.changedTouches[0].screenY:r.screenY;v.triggerHandler(c.jGestures.events.touchendStart,r);if(c.hasGestures){r.currentTarget.removeEventListener("touchmove",g,false);r.currentTarget.removeEventListener("touchend",j,false)}else{v.unbind("mousemove",g);v.unbind("mouseup",j)}var m=v.data("ojQueryGestures");var y=(Math.abs(m.oStartTouch.screenX-p)>c.jGestures.defaults.thresholdMove||Math.abs(m.oStartTouch.screenY-o)>c.jGestures.defaults.thresholdMove)?true:false;var B=(Math.abs(m.oStartTouch.screenX-p)>c.jGestures.defaults.thresholdSwipe||Math.abs(m.oStartTouch.screenY-o)>c.jGestures.defaults.thresholdSwipe)?true:false;var A;var t;var n;var l;var k;var q;var w=["zero","one","two","three","four"];var s;for(A in m){t=m.oStartTouch;n={};p=(x)?r.changedTouches[0].screenX:r.screenX;o=(x)?r.changedTouches[0].screenY:r.screenY;l=p-t.screenX;k=o-t.screenY;q=d({type:"swipe",touches:u,screenY:o,screenX:p,deltaY:k,deltaX:l,startMove:t,event:r,timestamp:t.timestamp});s=false;switch(A){case"swipeone":if(x===false&&u==1&&y===false){break}if(x===false||(u==1&&y===true&&B===true)){s=true;q.type=["swipe",w[u]].join("");v.triggerHandler(q.type,q)}break;case"swipetwo":if((x&&u==2&&y===true&&B===true)){s=true;q.type=["swipe",w[u]].join("");v.triggerHandler(q.type,q)}break;case"swipethree":if((x&&u==3&&y===true&&B===true)){s=true;q.type=["swipe",w[u]].join("");v.triggerHandler(q.type,q)}break;case"swipefour":if((x&&u==4&&y===true&&B===true)){s=true;q.type=["swipe",w[u]].join("");v.triggerHandler(q.type,q)}break;case"swipeup":case"swiperightup":case"swiperight":case"swiperightdown":case"swipedown":case"swipeleftdown":case"swipeleft":case"swipeleftup":if(x&&y===true&&B===true){s=true;q.type=["swipe",((q.delta[0].lastX!=0)?((q.delta[0].lastX>0)?"right":"left"):""),((q.delta[0].lastY!=0)?((q.delta[0].lastY>0)?"down":"up"):"")].join("");v.triggerHandler(q.type,q)}break;case"tapone":case"taptwo":case"tapthree":case"tapfour":if((y!==true&&s!==true)&&(w[u]==A.slice(3))){q.description=["tap",w[u]].join("");q.type=["tap",w[u]].join("");v.triggerHandler(q.type,q)}break}var z={};v.data("ojQueryGestures",c.extend(true,m,z));v.data("ojQueryGestures",c.extend(true,m,z))}v.triggerHandler(c.jGestures.events.touchendProcessed,r)}function e(l){var k=jQuery(l.currentTarget);k.triggerHandler(c.jGestures.events.gesturestart,l);var m=k.data("ojQueryGestures");var n={};n.oStartTouch={timestamp:new Date().getTime()};k.data("ojQueryGestures",c.extend(true,m,n))}function f(l){var k=jQuery(l.currentTarget);var p,m,r,o;var q=k.data("ojQueryGestures");var n;for(n in q){switch(n){case"pinch":p=l.scale;if(((p<1)&&(p%1)<(1-c.jGestures.defaults.thresholdPinchclose))||((p>1)&&(p%1)>(c.jGestures.defaults.thresholdPinchopen))){m=(p<1)?-1:+1;o=d({type:"pinch",scale:p,touches:null,startMove:q.oStartTouch,event:l,timestamp:q.oStartTouch.timestamp,vector:m,description:["pinch:",m,":",((p<1)?"close":"open")].join("")});k.triggerHandler(o.type,o)}break;case"rotate":p=l.rotation;if(((p<1)&&(-1*(p)>c.jGestures.defaults.thresholdRotateccw))||((p>1)&&(p>c.jGestures.defaults.thresholdRotatecw))){m=(p<1)?-1:+1;o=d({type:"rotate",rotation:p,touches:null,startMove:q.oStartTouch,event:l,timestamp:q.oStartTouch.timestamp,vector:m,description:["rotate:",m,":",((p<1)?"counterclockwise":"clockwise")].join("")});k.triggerHandler(o.type,o)}break}}}function i(l){var k=jQuery(l.currentTarget);k.triggerHandler(c.jGestures.events.gestureendStart,l);var n;var o=k.data("ojQueryGestures");var m;for(m in o){switch(m){case"pinchclose":n=l.scale;if((n<1)&&(n%1)<(1-c.jGestures.defaults.thresholdPinchclose)){k.triggerHandler("pinchclose",d({type:"pinchclose",scale:n,vector:-1,touches:null,startMove:o.oStartTouch,event:l,timestamp:o.oStartTouch.timestamp,description:"pinch:-1:close"}))}break;case"pinchopen":n=l.scale;if((n>1)&&(n%1)>(c.jGestures.defaults.thresholdPinchopen)){k.triggerHandler("pinchopen",d({type:"pinchopen",scale:n,vector:+1,touches:null,startMove:o.oStartTouch,event:l,timestamp:o.oStartTouch.timestamp,description:"pinch:+1:open"}))}break;case"rotatecw":n=l.rotation;if((n>1)&&(n>c.jGestures.defaults.thresholdRotatecw)){k.triggerHandler("rotatecw",d({type:"rotatecw",rotation:n,vector:+1,touches:null,startMove:o.oStartTouch,event:l,timestamp:o.oStartTouch.timestamp,description:"rotate:+1:clockwise"}))}break;case"rotateccw":n=l.rotation;if((n<1)&&(-1*(n)>c.jGestures.defaults.thresholdRotateccw)){k.triggerHandler("rotateccw",d({type:"rotateccw",rotation:n,vector:-1,touches:null,startMove:o.oStartTouch,event:l,timestamp:o.oStartTouch.timestamp,description:"rotate:-1:counterclockwise"}))}break}}k.triggerHandler(c.jGestures.events.gestureendProcessed,l)}})(jQuery);